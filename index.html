<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Best Gold SIP Date Finder</title>
<style>
  body { font-family: Arial,sans-serif; background: #fdf6e3; margin:0; padding:0; }
  header { background: gold; padding:15px; text-align:center; font-size:1.4em; font-weight:bold; }
  main { padding:15px; }
  label { display:block; margin-bottom:5px; font-weight:bold; }
  input,button { width:100%; padding:12px; margin-bottom:15px; font-size:1.1em; border:1px solid #ccc; border-radius:5px; }
  button { background: gold; border:none; font-weight:bold; cursor:pointer; }
  button:hover { background:#e6b800; }
  #result { font-size:1.2em; margin-bottom:15px; font-weight:bold; }
  table { width:100%; border-collapse:collapse; font-size:1em; }
  th,td { border:1px solid #ccc; padding:10px; text-align:center; }
  th { background:#fff3b0; }
  tr.best { background:#c6f6d5; font-weight:bold; }
</style>
</head>
<body>
<header>ðŸ“Š Best Gold SIP Date Finder</header>
<main>
  <label for="sipAmount">Monthly SIP Amount (â‚¹):</label>
  <input type="number" id="sipAmount" value="25000">
  <button onclick="findBestDate()">Find Best Date (25th â†’ 10th)</button>
  <p id="result"></p>
  <table>
    <thead><tr><th>Date</th><th>Price (â‚¹/g)</th><th>Grams Bought</th><th>Extra Cost vs Best (â‚¹)</th></tr></thead>
    <tbody id="rateTable"><tr><td colspan="4">No data yet</td></tr></tbody>
  </table>
</main>
<script>
const API_KEY = "YOUR_METALS_DEV_KEY"; // <-0DEMSZI1YIYU7772DEPR67572DEPR

async function findBestDate() {
  const sipAm = parseFloat(document.getElementById("sipAmount").value);
  const today = new Date(), m = today.getMonth(), y = today.getFullYear();
  const sd = new Date(y, m - 1, 25), ed = new Date(y, m, 10);
  const s = sd.toISOString().slice(0,10), e = ed.toISOString().slice(0,10);

  const url = `https://api.metals.dev/v1/timeseries?api_key=${API_KEY}&start_date=${s}&end_date=${e}&metal=gold&currency=INR&unit=g`;
  // This gives daily gold prices per gram in INR with no CORS issues :contentReference[oaicite:1]{index=1}

  try {
    const res = await fetch(url);
    const data = await res.json();
    if(data.status !== 'success') throw new Error();

    const prices = data.rates || {};
    let rows = [], bestDate = null, bestRate = Infinity, worstRate = 0;

    for(const date in prices) {
      const rate = prices[date];
      rows.push({date, rate});
      if(rate < bestRate) bestRate = rate, bestDate = date;
      if(rate > worstRate) worstRate = rate;
    }

    const table = document.getElementById("rateTable");
    table.innerHTML = "";
    rows.sort((a,b)=>a.date.localeCompare(b.date)).forEach(r => {
      const grams = (sipAm / r.rate).toFixed(2);
      const extra = ((r.rate - bestRate) * grams).toFixed(2);
      table.innerHTML += `<tr ${r.date===bestDate?'class="best"':''}>
        <td>${r.date}</td><td>â‚¹${r.rate.toFixed(2)}</td><td>${grams}</td><td>${extra>0?'â‚¹'+extra:'â€”'}</td>
      </tr>`
    });

    const savePct = (((worstRate - bestRate)/worstRate)*100).toFixed(2);
    document.getElementById("result").innerHTML = `ðŸ“… Best Date: <b>${bestDate}</b> at â‚¹${bestRate.toFixed(2)}/g â€” Save up to ${savePct}%`;
  } catch(e) {
    console.error(e);
    document.getElementById("result").innerText = "âš  Error fetching prices.";
  }
}
</script>
</body>
</html>

